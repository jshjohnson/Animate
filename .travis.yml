language: node_js
node_js:
- '10'
cache:
  directories:
  - "~/.npm"
  - "~/.cache"
install:
- npm ci
jobs:
  include:
  - stage: Linting
    script: npm run lint
  - stage: Tests
    script: npm run test
  - stage: Publishing to NPM
    if: branch = master
    script: npm run build
    deploy:
      provider: npm
      email: "$NPM_EMAIL_ADDRESS"
      api_key:
        secure: EcmiIhEPyxsf5NYSod6lRi3AGYaQgV5sFaer7FOYjYnrtMV9s/igpWxSrztzm5YBUgtAPltj0wkIpPv4CXikFm3LwNoP2MBqTy2pSB+E99YAJc6kOJpGhF6Luav5cICIWi6EUvUHqOKrvWxiX5l0tqPuDaCNvNVVi1vF0t8oo9nfME4+wnkieKqA3bvc3ye4hzy/nr0vunanRYir35nQRdOUem2lnMlcl4d6DxCyOMapOfki1Gq04+mNQ+X30oT03u/CRoFu+8osm6J4YKPnsWXudy1j9Vk/TZ81iEzbS5tgbdzlLL18pMIl048pd9BrHXM47lhlbchqPF12ERGwnGxf7XmkPJ2uwi7d6VAhtLKwZJ40+hYoAIadL7UayGK92H+x3l9Q/6bg5J87ZYs0+ZyYJ0I/rfCX5zH6Nu2FRacHHBGCg4pHUWa6rLzbsESNYTi5EQPauGMmJEZ7/jlhN+gH8foc5yYGWua9ZD3ALlB9jY+KKnogxzLQSfBwTOaETOIuNnQoxhIb9u6rOdaX3ZLszdesB2TGbECowK3X9r+4nreyVt5Cg7WEodEvQy7JftS6I9dmrU68BZ+bLcTJ/DIDCm8whsZ6xbPXh2GPpzFjpYTKdsJ/5Rs0z1+3d3jjOfHLBSsdpKveECPatFjLYwBf65x09KNG9EfQD7Vhbqw=
      skip_cleanup: true
      on:
        tags: true
  - stage: Publishing to GitHub
    if: branch = master
    script: echo "Publishing to Github..."
    deploy:
      provider: releases
      api_key:
        secure: kmZmRRvbIW5jyeVtacYOOfPpdm8yTwQp9zHXv6Q4k2ghwb3jm0QLxwD06xF8z779K46gUKkjhraYw6j6+FPLdiuz4s5Bf2jgyWoZSJqfNTq5qc8msuX66RH2G3RsVTJyip7Tpu2gJ9IA29jL0NxIwpPdDW377i4A99qTpJqt3UEpl1ftgcxrgbMWtS08XqYFyfzjN2iZbq3AjhBXebxwyAvhdVmilJwJ1b/raRYXEgDJszr8Nres08oCRToBRtApbZUUworJHxHexN64C5ftruW1Qc84OaKKtZZByssYXlHHnFjeMg+L9YwjMCqBP4s+YmmzeP5VSVp3l1aJdnYYfaeCoFqG8yPb2OAn6eJT+AGilvMxXE+Qo4XUuptzVnZl37RffrS0etl13/e93EeEmhAluHR2Dz6PAZvnQftc2Pol/w0w5y788v/UKlHXLI/zV0GAMmBVvdGMdod/ah4r43EGRY8NugrkK4RcnUH/dF/969++t0F41R8o85Qd2zOqUb00sIHbTZO8QY8ZI5sPkSJXdTalo6jMGAwYkjiuxEZys/CWiizDirfIGQJ+FevdUoUiqRmhiNFilEV1CPUL6bLC/iwyy2MdXlA65h1xkNcJwdl0Y6/TAzooKa8JdrCFSBgVE+bErVhwhmC/dAKsbl5HTy/fB0f63Mjv3zkMO+0=
      skip_cleanup: true
      on:
        repo: jshjohnson/Animate
        tags: true
  - stage: Deploying
    if: branch = master
    script: npm run deploy
    
